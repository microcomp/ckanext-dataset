{% ckan_extends %}
{% block header_site_navigation_tabs %}
{% if c.controller == 'package' %}
{% if  c.action == 'read' %}
<script>

	var rows = document.getElementsByTagName('td')
	var x = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('spatial', None)) }}</h3><a onclick='hide()' alt='hide content' class='btn btn-primary'>{{_('Hide')}}</a><br />"
	var ii = 0
	for(var i=0; i < rows.length; i++){
		var text = rows[i].innerHTML
		if(text.substring(0,34)=='{"type": "Polygon", "coordinates":'){

			x += text
			ii = i
			console.log("found")
		}
	}
	
	function start(){
		

		for(var i=0; i < rows.length; i++){
		var text = rows[i].innerHTML
		if(text.substring(0,34)=='{"type": "Polygon", "coordinates":'){
			x += text
			ii = i
			rows[ii].innerHTML = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('spatial', None)) }}</h3> <a onclick='show_spatial()' alt='show text' class='btn btn-primary'>{{_('Show')}}</a>"
			
		}
		
	}
		
	}
	function show_spatial(){
			rows[ii].innerHTML = x
	}
	function hide(){
			rows[ii].innerHTML = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('spatial', None)) }}</h3>  <a onclick='show_spatial()' alt='show text' class='btn btn-primary'>{{_('Show')}}</a>"
	}
	window.onload = start
	
</script>
{%endif%}{%endif%}
{{super()}}
{%endblock%}